<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PROJECT TITAN | CORE FINANCIAL [V3.8 - UX/Visual]</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* =================================== */
        /* 1. VARI√ÅVEIS CSS E BASE (FUTURE NOIR)*/
        /* =================================== */
        :root {
            /* Fundo Escuro Classudo */
            --cor-fundo-principal: #0E1117; 
            --cor-fundo-card: rgba(20, 25, 33, 0.7); 
            --cor-borda: #2C3540; 
            --cor-texto-principal: #F0F6FC; 
            --cor-texto-secundario: #8B949E; 
            
            /* Cores de Destaque Futuristas */
            --cor-sucesso: #10B981; /* Verde Esmeralda (Sucesso/Confirma√ß√£o) */
            --cor-divida: #EF4444; /* Vermelho Alerta */
            --cor-primario: #00BCD4; /* Azul Ciano Vibrante (A√ß√£o/Destaque) */
            --cor-meta-diaria: #9B59B6; /* Roxo Profundo */
            --cor-alerta: #F59E0B; /* Amarelo */
            --cor-fixa: #1DE9B6; /* Verde Neon para Fixas */
            --cor-fundo-ia: #151A23; /* Fundo mais escuro para IA */
            --cor-destaque-ia: #FFD700; /* Dourado para IA/Prioridade */

            /* Tipografia */
            --fonte-titulo: 'Inter', sans-serif;
            --fonte-corpo: 'Inter', sans-serif;
            --fonte-dados: 'Space Mono', monospace; 
            
            /* Efeitos */
            --sombra-card: 0 4px 20px rgba(0, 0, 0, 0.5), inset 0 0 0 1px var(--cor-borda);
            --sombra-card-hover: 0 6px 30px rgba(0, 0, 0, 0.7), inset 0 0 0 2px var(--cor-primario);
            --transicao-rapida: 0.3s ease-in-out;
            --espacamento-mobile: 15px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: var(--fonte-corpo);
        }

        body {
            background-color: var(--cor-fundo-principal);
            color: var(--cor-texto-principal);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-image: radial-gradient(circle at 50% 50%, rgba(0, 188, 212, 0.05), transparent 80%);
        }

        .container {
            max-width: 1300px; 
            margin: 40px auto;
            padding: 0 25px;
            width: 100%;
        }
        
        /* =================================== */
        /* 2. BANNER E T√çTULO */
        /* =================================== */

        .dynamic-banner {
            width: 100%;
            background-color: #000000;
            color: var(--cor-fixa); 
            padding: 10px 0;
            text-align: right;
            border-bottom: 2px solid var(--cor-fixa);
            box-shadow: 0 5px 20px rgba(29, 233, 182, 0.3);
            overflow: hidden; 
            white-space: nowrap; 
        }
        
        .banner-text {
            font-family: var(--fonte-dados);
            font-size: 1.1em;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            padding-right: 30px;
            display: inline-block;
            white-space: nowrap; 
            animation: moveBanner 10s linear infinite; 
        }
        
        @keyframes moveBanner {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        h1 {
            font-family: var(--fonte-titulo);
            color: var(--cor-texto-principal);
            text-align: center;
            margin-top: 30px;
            margin-bottom: 30px;
            font-weight: 800;
            font-size: 3em; 
            letter-spacing: 2px;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
            padding-bottom: 15px;
        }
        
        /* =================================== */
        /* 3. DASHBOARD E CART√ïES */
        /* =================================== */
        
        /* NOVO: Centraliza√ß√£o e Estilo Base para o Target Di√°rio */
        .meta-diaria-total {
            text-align: center; /* Centraliza todo o conte√∫do do card */
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            background-color: var(--cor-fundo-card);
            transition: all var(--transicao-rapida);
        }
        .meta-diaria-total > div {
            display: flex;
            flex-direction: column;
            align-items: center; /* Centraliza os itens internos */
        }
        #meta-diaria-total-el {
            font-size: 2.2em;
            font-weight: 800;
            color: var(--cor-meta-diaria);
            font-family: var(--fonte-dados);
            margin-top: 5px;
        }
        .destaque-conclusao {
            font-size: 1em;
            font-weight: 700;
            margin-top: 15px;
            font-family: var(--fonte-titulo);
        }

        /* NOVO: Efeito Glow para Meta Batida */
        .meta-batida {
            border: 3px solid var(--cor-sucesso) !important;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.7), 0 0 30px rgba(16, 185, 129, 0.5);
            background-color: rgba(16, 185, 129, 0.1) !important;
        }

        /* Barra de Progresso (Corre√ß√£o Visual) */
        .progresso-bar-container {
            height: 10px;
            background-color: #1A212E; 
            border-radius: 5px;
            overflow: hidden;
            margin-top: 8px;
            border: 1px solid var(--cor-borda);
        }

        .progresso {
            height: 100%;
            background: linear-gradient(90deg, #444444 0%, var(--cor-sucesso) 100%); /* Gradiente para dar profundidade */
            border-radius: 5px;
            transition: width 0.6s ease-out; /* Transi√ß√£o suave */
        }

        .dashboard-header {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        .info-card {
            background-color: var(--cor-fundo-card);
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--sombra-card);
            border-left: 5px solid var(--cor-primario);
        }
        .info-card .rotulo {
            color: var(--cor-texto-secundario);
            font-size: 0.9em;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .info-card .valor {
            font-family: var(--fonte-dados);
            font-size: 1.8em;
            font-weight: 700;
            display: block;
        }
        .valor-caixa { color: var(--cor-sucesso); }
        .valor-divida { color: var(--cor-divida); }
        .progress-area {
            grid-column: span 3;
            background-color: var(--cor-fundo-card);
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--sombra-card);
            border-left: 5px solid var(--cor-sucesso);
        }

        /* ... (O restante dos estilos permanecem como estavam para garantir a funcionalidade) ... */

        /* =================================== */
        /* 4. SE√á√ïES E TOGGLES */
        /* =================================== */
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        .section-header h2 {
            font-size: 1.5em;
            color: var(--cor-fixa);
        }

        .toggle-section {
            margin-top: 25px;
            border-radius: 8px;
            overflow: hidden;
        }
        .section-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color var(--transicao-rapida);
            background-color: var(--cor-fundo-card);
            box-shadow: var(--sombra-card);
        }
        .section-toggle:hover {
            background-color: #1A212E;
        }
        .section-toggle h2 {
            font-size: 1.1em;
            margin: 0;
            color: var(--cor-texto-principal);
            font-weight: 600;
        }
        .section-toggle i {
            transition: transform 0.3s ease;
        }
        .section-toggle.aberto i {
            transform: rotate(180deg);
        }
        .toggle-section.receitas .section-toggle { border-left: 5px solid var(--cor-sucesso); }
        .toggle-section.fixas .section-toggle { border-left: 5px solid var(--cor-fixa); }
        .toggle-section.dividas .section-toggle { border-left: 5px solid var(--cor-divida); }

        .lista-container-ocultavel {
            padding-top: 15px;
            padding-bottom: 15px;
        }

        /* Contas Fixas & D√≠vidas (Padr√£o de Card Lista) */
        .lista-cartoes-container ul {
            list-style: none;
            padding-left: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }
        .lista-cartoes-container li {
            background-color: #1A212E;
            padding: 18px;
            border-radius: 8px;
            display: flex;
            flex-direction: column; 
            justify-content: space-between;
            align-items: flex-start; 
            border-left: 5px solid var(--cor-fixa); 
            font-size: 1em;
            font-family: var(--fonte-dados);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .lista-dividas li {
            border-left: 5px solid var(--cor-divida); 
        }
        
        .lista-cartoes-item-info {
             display: flex;
             flex-direction: column;
             margin-bottom: 10px;
             width: 100%;
        }
        .lista-cartoes-item-info strong {
             font-weight: 700;
             font-size: 1.1em;
        }

        .diaria-fixa-destaque {
            background-color: var(--cor-fixa);
            color: var(--cor-fundo-principal) !important;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        
        .btn-pagar-fixa, .btn-acao-divida {
            background-color: var(--cor-fixa);
            color: var(--cor-fundo-principal);
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 700;
            transition: all var(--transicao-rapida);
            margin-top: 10px; 
            width: 100%; 
            text-align: center;
        }
        
        .btn-acao-divida {
             background-color: var(--cor-divida);
        }
        .btn-acao-divida.inativo {
             background-color: var(--cor-borda);
             cursor: not-allowed;
             opacity: 0.4;
        }

        .btn-pagar-fixa:hover {
             background-color: #00FFC6;
             box-shadow: 0 0 10px var(--cor-fixa);
        }
        .btn-pagar-fixa.pago {
             background-color: var(--cor-sucesso);
             cursor: not-allowed;
             opacity: 1; 
        }
        .btn-pagar-fixa.inativo {
             background-color: var(--cor-borda);
             cursor: not-allowed;
             opacity: 0.4;
        }

        /* =================================== */
        /* 5. TABELAS E BOT√ïES DE A√á√ÉO */
        /* =================================== */

        .tabela-wrapper {
             overflow-x: auto; 
             width: 100%;
        }
        
        .tabela-transacoes-log {
             min-width: 400px; 
             width: 100%; 
             border-collapse: collapse;
             font-family: var(--fonte-dados);
        }
        .tabela-transacoes-log th, .tabela-transacoes-log td {
            padding: 12px 8px; 
            text-align: left;
            border-bottom: 1px solid var(--cor-borda);
        }
        .tabela-transacoes-log th {
            background-color: #1A212E;
            color: var(--cor-primario);
            text-transform: uppercase;
            font-weight: 700;
            font-size: 0.9em;
            white-space: nowrap;
        }
        /* Largura das colunas do LOG: DESCRI√á√ÉO, VALOR(R$), A√á√ÉO (Ajustado: Data removida) */
        .tabela-transacoes-log th:nth-child(1), .tabela-transacoes-log td:nth-child(1) { width: 55%; } /* Aumento da Descri√ß√£o */
        .tabela-transacoes-log th:nth-child(2), .tabela-transacoes-log td:nth-child(2) { width: 30%; }
        .tabela-transacoes-log th:nth-child(3), .tabela-transacoes-log td:nth-child(3) { width: 15%; text-align: center; } 

        .btn-acao-tabela {
            background: none;
            border: none;
            color: var(--cor-divida);
            cursor: pointer;
            padding: 5px;
            font-size: 1.1em;
            transition: color var(--transicao-rapida);
        }
        .btn-acao-tabela:hover {
            color: var(--cor-alerta);
        }
        
        /* ... (M√≥dulos e outros estilos) ... */
        
        .motivacao-box {
            background-color: #1A212E;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-style: italic;
            color: var(--cor-texto-secundario);
            margin-bottom: 25px;
            border: 1px solid var(--cor-borda);
        }
        .alerta-nota {
             background-color: #1A212E;
             padding: 12px;
             border-radius: 6px;
             border-left: 5px solid var(--cor-alerta);
             color: var(--cor-alerta);
             font-size: 0.9em;
             margin-bottom: 15px;
        }
        
        .plano-quitacao {
             background-color: var(--cor-fundo-ia);
             padding: 20px;
             border-radius: 10px;
             border: 2px solid var(--cor-destaque-ia);
             box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        .plano-quitacao h3 {
             color: var(--cor-destaque-ia);
             margin-bottom: 20px;
             font-size: 1.4em;
        }
        .ia-input-group {
             display: flex;
             justify-content: space-between;
             align-items: center;
             gap: 15px;
             margin-bottom: 20px;
        }
        .ia-input-group label {
             display: block;
             margin-bottom: 5px;
             font-size: 0.9em;
             color: var(--cor-texto-secundario);
        }
        #resultado-plano-ia p, #dicas-quitacao p, #dicas-quitacao li {
             margin-bottom: 5px;
             font-size: 1em;
             font-family: var(--fonte-dados);
        }
        #resultado-plano-ia strong {
             color: var(--cor-primario);
             font-weight: 700;
        }
        #dicas-quitacao h4 {
             color: var(--cor-fixa);
             margin-top: 15px;
             margin-bottom: 8px;
             font-size: 1.1em;
        }


        /* =================================== */
        /* 7. RESPONSIVIDADE (MOBILE FIRST) */
        /* =================================== */

        @media (max-width: 768px) {
            
            /* Global */
            .container {
                padding: 0 var(--espacamento-mobile);
            }
            .dashboard-header {
                 grid-template-columns: 1fr;
            }
            .progress-area {
                 grid-column: span 1;
            }
            
            /* Modal de Cadastro: Otimiza√ß√£o de Espa√ßo Vertical */
            .modal-content {
                 margin: 5% auto !important; 
                 padding: 20px !important; 
                 width: 90% !important; 
                 max-width: 90% !important;
            }
            
            /* Log de Transa√ß√µes (Tabela) */
            .tabela-transacoes-log {
                 font-size: 0.8em;
            }
            .tabela-transacoes-log th, .tabela-transacoes-log td {
                 padding: 6px;
            }
            
            /* Contas Fixas & D√≠vidas (Cards) */
            .lista-cartoes-container ul {
                grid-template-columns: 1fr; 
                gap: 15px;
            }
            .lista-cartoes-container li {
                padding: 15px;
            }
            .lista-cartoes-item-info {
                word-wrap: break-word; 
                overflow: hidden;
            }
            
            /* Plano IA */
            .ia-input-group {
                 flex-direction: column;
                 align-items: flex-start;
            }
            .ia-input-group > div {
                 width: 100%;
            }
            .ia-input-group button {
                 width: 100% !important;
            }
            .plano-quitacao {
                 padding: 15px;
            }
            
            h1 {
                 font-size: 2em;
                 margin-top: 20px;
                 margin-bottom: 20px;
            }

        }
        
        /* ... (Estilos de login e outros mantidos) ... */
        
    </style>
</head>
<body>
    
    <div id="login-screen">
        <div class="login-box">
            <h2><i class="fas fa-fingerprint"></i> PROJECT TITAN</h2>
            <p style="color: var(--cor-texto-secundario); margin-bottom: 25px;">Acesso restrito ao Painel de Gest√£o Estrat√©gica.</p>
            <label for="password-input">CHAVE DE SEGURAN√áA</label>
            <input type="password" id="password-input" placeholder="Chave de Acesso" required>
            <button id="btn-login" class="btn-principal"><i class="fas fa-sign-in-alt"></i> AUTORIZAR ACESSO</button>
            <p id="login-feedback" style="margin-top: 15px; color: var(--cor-divida); font-weight: bold;"></p>
        </div>
    </div>
    
    <div id="main-content" style="display: none;">
        
        <div class="dynamic-banner">
            <div class="banner-text" id="banner-text">
                üí∞ Foco & Disciplina. ZERO D√çVIDA. Capital √© PODER. üí∏
            </div>
        </div>
        
        <div class="container">
            <h1><i class="fas fa-terminal"></i> PROJECT TITAN</h1>
        </div>

        
        <div class="container" id="data-atual-info">
            <button id="btn-data-atual">
                <i class="fas fa-calendar-day"></i> RASTREIO DE METAS: <span id="data-atual"></span>
            </button>
        </div>

        <div class="motivacao-box container" id="motivacao-diaria">
            <i class="fas fa-infinity"></i>
            "DISCIPLINA √â O COMANDO. A LIBERDADE FINANCEIRA √â O STATUS. Mantenha o Foco."
        </div>
        
        <div id="meta-diaria-card" class="meta-diaria-total container" style="border: 1px solid var(--cor-meta-diaria);">
            <div>
                <p style="color: var(--cor-texto-secundario); font-weight: 600;"><i class="fas fa-bullseye"></i> TARGET DI√ÅRIO DE APORTE (FIXAS + QUITA√á√ÉO)</p>
                <span id="meta-diaria-total-el">R$ 0,00</span>
            </div>
            <span id="meta-diaria-incentivo" class="destaque-conclusao" style="display: none;"></span>
        </div>
        

        <header class="dashboard-header container">
            
            <div class="info-card">
                <p class="rotulo"><i class="fas fa-satellite-dish"></i> CAPITAL ACUMULADO (ENTRADAS)</p>
                <span id="total-lancado" class="valor valor-caixa">R$ 0,00</span>
            </div>
            
            <div class="progress-area" id="meta-area">
                <p class="rotulo"><i class="fas fa-route"></i> STATUS DE QUITA√á√ÉO √öNICA</p>
                <p style="margin-bottom: 5px; color: var(--cor-texto-secundario);">D√≠vidas Pendentes: <span id="total-dividas-pendentes" style="font-weight: 700; color: var(--cor-divida); font-family: var(--fonte-dados);">R$ 0,00</span></p>
                <p>Progresso de Quita√ß√£o com Capital: <span id="progresso-capital-txt" style="font-weight: 700; color: var(--cor-sucesso); font-family: var(--fonte-dados);">0.00%</span></p>
                
                <div class="progresso-bar-container">
                    <div id="progresso-bar" class="progresso" style="width: 0%;"></div>
                </div>
            </div>
            
            <div class="info-card">
                <p class="rotulo"><i class="fas fa-skull-crossbones"></i> SALDO TOTAL A QUITAR</p>
                <span id="saldo-pendente-total" class="valor valor-divida">R$ 0,00</span>
            </div>
        </header>
        
        <main class="container">
            
            <div class="section-header">
                <h2><i class="fas fa-arrow-circle-up"></i> M√ìDULO: INJE√á√ÉO DE CAPITAL</h2>
                <button id="abrir-cadastro-receita" class="btn-principal"> <i class="fas fa-plus"></i> INJETAR VALOR</button>
            </div>

            
            <div id="historico-receitas-container" class="toggle-section">
                <div class="section-toggle receitas" id="toggle-receitas">
                    <h2><i class="fas fa-clipboard-list"></i> LOG: REGISTROS DE LAN√áAMENTO (CAPITAL)</h2>
                    <i class="fas fa-chevron-down"></i>
                </div>
                
                <div id="lista-receitas-container" class="lista-container-ocultavel" style="display: none;">
                    <div class="tabela-wrapper">
                        <table class="tabela-transacoes-log">
                            <thead>
                                <tr>
                                    <th>DESCRI√á√ÉO</th>
                                    <th>VALOR (R$)</th>
                                    <th>A√á√ÉO</th>
                                </tr>
                            </thead>
                            <tbody id="lista-entradas">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div id="feedback-fixas-quitadas" class="motivacao-box" style="display: none; margin-top: 40px; border: 2px solid var(--cor-sucesso);">
                 <i class="fas fa-medal" style="color: var(--cor-sucesso);"></i> PROTOCOLO DE CONTAS FIXAS CONCLU√çDO! <i class="fas fa-medal" style="color: var(--cor-sucesso);"></i>
                 <p style="color: var(--cor-texto-principal); font-weight: 600;">Contas Fixas liquidadas para este ciclo. Foco total em reduzir o Saldo Pendente.</p>
            </div>

            
            <div id="contas-fixas-toggle" class="toggle-section">
                <div class="section-toggle fixas" id="toggle-fixas">
                    <h2><i class="fas fa-calculator"></i> CONTAS FIXAS (META: R$ <span id="soma-fixas" class="valor-divida" style="font-family: var(--fonte-dados); font-size: 1em;">0,00</span>)</h2>
                    <i class="fas fa-chevron-down"></i>
                </div>
                
                <div id="lista-fixas-container" class="lista-container-ocultavel" style="display: none;">
                     <p class="alerta-nota">
                        <i class="fas fa-exclamation-triangle"></i> NOTA: Ao clicar em 'PAGAR', o valor ser√° deduzido imediatamente do Capital Acumulado.
                     </p>
                     <div id="contas-fixas-card" class="lista-cartoes-container">
                         <ul id="lista-contas-fixas">
                         </ul>
                    </div>
                </div>
            </div>


            
            <div id="dividas-container" class="toggle-section">
                <div class="section-toggle dividas" id="toggle-dividas">
                    <h2><i class="fas fa-radiation"></i> D√çVIDAS √öNICAS (PROTOCOLO DE REDU√á√ÉO)</h2>
                    <i class="fas fa-chevron-down"></i>
                </div>
                
                <div id="lista-dividas-quitar-container" class="lista-container-ocultavel" style="display: none;">
                    <p class="alerta-nota">
                        <i class="fas fa-exclamation-triangle"></i> NOTA: O bot√£o "PAGAR" s√≥ √© ativado quando o Capital Acumulado √© $\ge$ Saldo da D√≠vida.
                     </p>
                     <div class="lista-cartoes-container lista-dividas">
                        <ul id="lista-dividas-quitar">
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="plano-quitacao container" style="margin-left: 0; margin-right: 0; padding-left: 30px; padding-right: 30px; margin-top: 50px;">
                <h3><i class="fas fa-brain"></i> PLANO DE QUITA√á√ÉO ESTRAT√âGICO (M√ìDULO IA)</h3>
                
                <div id="plano-ia-controls" class="ia-input-group">
                    <div>
                         <label for="meses-plano">TARGET: Meses para Quitar D√≠vidas √öNICAS:</label>
                         <input type="number" id="meses-plano" value="5" min="1" max="60" style="padding: 8px; border-radius: 4px; border: 1px solid var(--cor-borda); background: #1A212E; color: var(--cor-fixa); width: 80px;">
                    </div>
                    <button id="btn-gerar-plano" class="btn-principal" style="margin-top: 0; padding: 10px 15px; width: auto;">
                        <i class="fas fa-redo-alt"></i> RECALCULAR PLANO
                    </button>
                </div>
                
                <div id="resultado-plano-ia">
                    <p style="color: var(--cor-texto-secundario);">Aguardando c√°lculo...</p>
                    </div>
                
                <div id="dicas-quitacao">
                     </div>
            </div>
            
        </main>
    </div>


    <div id="modal-receita" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7);">
        <div class="modal-content" style="background-color: var(--cor-fundo-card); margin: 15% auto; padding: 30px; border-radius: 10px; border: 1px solid var(--cor-primario); width: 80%; max-width: 400px; box-shadow: var(--sombra-card-hover);">
            <span class="fechar-modal" id="fechar-modal-receita" style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
            <h3 id="titulo-dados-receita" style="color: var(--cor-sucesso);"><i class="fas fa-arrow-up"></i> LAN√áAMENTO DE CAPITAL</h3>
            <label for="valor-input-receita" style="display: block; margin-top: 20px; color: var(--cor-texto-principal); font-weight: 600;">VALOR DO APORTE (R$)</label>
            <input type="number" id="valor-input-receita" placeholder="0.00" min="0.01" step="0.01" style="width: 100%; padding: 10px; margin-top: 8px; border-radius: 5px; border: 1px solid var(--cor-borda); background-color: #1A212E; color: var(--cor-fixa); font-family: var(--fonte-dados);">
            <button class="btn-principal btn-ok" id="btn-cadastrar-receita" style="background-color: var(--cor-sucesso); margin-top: 25px;">CONFIRMAR LAN√áAMENTO <i class="fas fa-check"></i></button>
        </div>
    </div>
    
    <div id="modal-quitacao" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7);">
        <div class="modal-content" style="background-color: var(--cor-fundo-card); margin: 15% auto; padding: 30px; border-radius: 10px; border: 1px solid var(--cor-divida); width: 80%; max-width: 400px; box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);">
            <span class="fechar-modal" id="fechar-modal-quitacao" style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
            <h3 id="titulo-quitacao" style="color: var(--cor-divida);"><i class="fas fa-receipt"></i> REGISTRAR PAGAMENTO</h3>
            <p style="margin-top: 15px; margin-bottom: 10px; font-family: var(--fonte-titulo); font-weight: 600; color: var(--cor-texto-secundario);">
                TARGET CREDOR: <span id="nome-credor" style="font-family: var(--fonte-dados); color: var(--cor-texto-principal);"></span>
            </p>
            <p style="margin-bottom: 20px; font-family: var(--fonte-titulo); font-weight: 600; color: var(--cor-texto-secundario);">
                SALDO PENDENTE: <span id="saldo-quitacao" class="saldo-divida" style="font-family: var(--fonte-dados);"></span>
            </p>
            <label for="valor-pagamento" style="display: block; margin-top: 20px; color: var(--cor-texto-principal); font-weight: 600;">VALOR DO PAGAMENTO (R$)</label>
            <input type="number" id="valor-pagamento" placeholder="0.00" min="0.01" step="0.01" style="width: 100%; padding: 10px; margin-top: 8px; border-radius: 5px; border: 1px solid var(--cor-borda); background-color: #1A212E; color: var(--cor-fixa); font-family: var(--fonte-dados);">
            <button class="btn-principal btn-ok" id="btn-quitar-divida" style="background-color: var(--cor-divida); margin-top: 25px;">FINALIZAR TRANSA√á√ÉO</button>
        </div>
    </div>
    
    <script>
        // ===========================================
        // JAVASCRIPT: L√ìGICA DE NEG√ìCIO E CONEX√ÉO V3.8 (UX/Visual Otimizada)
        // ===========================================

        const DIAS_UTEIS_MES = 22; 
        const LOGIN_PASSWORD = '01';
        const SESSION_TIMEOUT_MS = 600000; // 10 minutos
        let sessionTimer;

        // Dados Iniciais (Mantidos - Importante para resetar Contas Fixas)
        const DEBT_LIST_INITIAL = [
             { id: 1, credor: "Itau visa", valorInicial: 200.00, valorAtual: 200.00 },
             { id: 2, credor: "Banco Inter", valorInicial: 120.00, valorAtual: 120.00 },
             { id: 3, credor: "Conect car", valorInicial: 60.00, valorAtual: 60.00 },
             { id: 4, credor: "Vivo", valorInicial: 95.00, valorAtual: 95.00 },
             { id: 5, credor: "Banco Pan", valorInicial: 265.00, valorAtual: 265.00 },
             { id: 6, credor: "Karen", valorInicial: 300.00, valorAtual: 300.00 },
             { id: 7, credor: "Claro", valorInicial: 300.00, valorAtual: 300.00 },
             { id: 8, credor: "Bruno Carro", valorInicial: 400.00, valorAtual: 400.00 },
             { id: 9, credor: "Mercado pago", valorInicial: 522.00, valorAtual: 522.00 },
             { id: 10, credor: "Koin", valorInicial: 700.00, valorAtual: 700.00 },
             { id: 11, credor: "Will bank", valorInicial: 700.00, valorAtual: 700.00 },
             { id: 12, credor: "Picpay", valorInicial: 859.64, valorAtual: 859.64 },
             { id: 13, credor: "Carol", valorInicial: 1000.00, valorAtual: 1000.00 },
             { id: 14, credor: "Localiza", valorInicial: 1200.00, valorAtual: 1200.00 },
             { id: 15, credor: "Light", valorInicial: 1450.00, valorAtual: 1450.00 },
             { id: 16, credor: "Casa", valorInicial: 1650.00, valorAtual: 1650.00 },
             { id: 17, credor: "Bradesco", valorInicial: 2000.00, valorAtual: 2000.00 },
             { id: 18, credor: "Itau master", valorInicial: 2500.00, valorAtual: 2500.00 },
             { id: 19, credor: "Carro", valorInicial: 3500.00, valorAtual: 3500.00 },
             { id: 20, credor: "Ravi", valorInicial: 4570.00, valorAtual: 4570.00 },
        ].sort((a, b) => a.valorAtual - b.valorAtual);
        
        const CONTAS_FIXAS_INITIAL = [
            { id: 100, nome: "Carro", valor: 1800.00, pago: false },
            { id: 101, nome: "Aluguel", valor: 850.00, pago: false },
            { id: 102, nome: "Academia", valor: 300.00, pago: false },
            { id: 103, nome: "Luz", valor: 250.00, pago: false },
            { id: 104, nome: "Internet Movel", valor: 120.00, pago: false },
            { id: 105, nome: "Wifi", valor: 100.00, pago: false }
        ].sort((a, b) => b.valor - a.valor);
        
        let idDebtQuitting = null; 
        
        // ===========================================
        // FUN√á√ïES UTILIT√ÅRIAS DE DADOS
        // ===========================================
        
        const formatarMoeda = (valor) => {
            return parseFloat(valor).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        };

        const getHojeString = () => new Date().toISOString().slice(0, 10);
        
        // --- Fun√ß√µes de Carregamento/Salvamento (Garantem que os dados s√£o arrays) ---
        
        const carregarContasFixas = () => {
            const fixas = localStorage.getItem('contasFixas');
            if (!fixas) return CONTAS_FIXAS_INITIAL;
            
            const loadedFixas = JSON.parse(fixas);
            return loadedFixas.map(f => ({ ...f, id: parseInt(f.id) }));
        };
        
        const salvarContasFixas = (fixas) => localStorage.setItem('contasFixas', JSON.stringify(fixas));
        
        const carregarTransacoes = () => {
            const transacoes = localStorage.getItem('transacoes');
            return transacoes ? JSON.parse(transacoes) : [];
        };

        const salvarTransacoes = (transacoes) => localStorage.setItem('transacoes', JSON.stringify(transacoes));
        
        const carregarDividas = () => {
            const dividas = localStorage.getItem('dividas');
            if (!dividas) {
                salvarDividas(DEBT_LIST_INITIAL);
                return DEBT_LIST_INITIAL;
            }
            const loadedDebts = JSON.parse(dividas).map(d => ({ ...d, id: parseInt(d.id) }));
            loadedDebts.sort((a, b) => a.valorAtual - b.valorAtual);
            return loadedDebts;
        }
        
        const salvarDividas = (dividas) => {
             dividas.sort((a, b) => a.valorAtual - b.valorAtual);
             localStorage.setItem('dividas', JSON.stringify(dividas));
        }

        const getSomaFixas = (fixas) => fixas.reduce((sum, item) => sum + item.valor, 0);
        const getMetaDiariaFixas = (somaFixas) => somaFixas / DIAS_UTEIS_MES;

        const getReceitasPorDia = (transacoes) => {
             const receitasDiarias = {};
             transacoes.filter(t => parseFloat(t.valor) > 0).forEach(t => { 
                 const data = t.data;
                 receitasDiarias[data] = (receitasDiarias[data] || 0) + parseFloat(t.valor);
             });
             return receitasDiarias;
        }
        
        const getTotais = (transacoes, dividas) => {
            let totalReceitas = transacoes.reduce((sum, t) => sum + parseFloat(t.valor), 0); 
            totalReceitas = Math.max(0, totalReceitas);

            const totalDividasIniciais = DEBT_LIST_INITIAL.reduce((sum, d) => sum + d.valorInicial, 0);
            const totalDividasPendentes = dividas.filter(d => d.valorAtual > 0.01).reduce((sum, d) => sum + parseFloat(d.valorAtual), 0);
            
            const totalPagoDividas = totalDividasIniciais - totalDividasPendentes;
            const progressoCapital = totalDividasIniciais > 0.01 
                ? (totalPagoDividas / totalDividasIniciais) * 100 
                : (totalDividasPendentes === 0 ? 100 : 0);
            
            const saldoPendenteTotal = totalDividasPendentes; 

            return { totalReceitas, totalDividasIniciais, totalDividasPendentes, progressoCapital, saldoPendenteTotal };
        }
        
        // ... (Fun√ß√µes de Sess√£o e Seguran√ßa mantidas) ...
        
        // ... (Fun√ß√µes de Contas Fixas mantidas) ...

        // ===========================================
        // L√ìGICA DE NEG√ìCIO: QUITA√á√ÉO E DASHBOARD
        // ===========================================

        const gerarPlanoQuitacaoIA = (isInit = false, totalDividasPendentes) => {
             const meses = parseInt(document.getElementById('meses-plano').value) || 5;
            
             if (totalDividasPendentes <= 0.01) {
                 if (!isInit) {
                      document.getElementById('resultado-plano-ia').innerHTML = '<p style="color: var(--cor-sucesso); font-weight: bold; margin-top: 15px;"><i class="fas fa-check-circle"></i> Protocolo de d√≠vida conclu√≠do. Foco em acumula√ß√£o de capital!</p>';
                 }
                 return 0;
             }

             const valorMensalNecessario = totalDividasPendentes / meses;
             const valorDiarioNecessario = valorMensalNecessario / DIAS_UTEIS_MES; 

             if (!isInit) {
                  const valorSemanalNecessario = valorDiarioNecessario * 5; 
                  let html = `
                     <p style="margin-bottom: 15px; color: var(--cor-texto-secundario); font-family: var(--fonte-titulo); font-weight: 600;">Para quitar **${formatarMoeda(totalDividasPendentes)}** em **${meses} meses**:</p>
                     <p><i class="fas fa-calendar-alt" style="color: var(--cor-destaque-ia);"></i> Aporte Mensal Necess√°rio: <strong>${formatarMoeda(valorMensalNecessario)}</strong></p>
                     <p><i class="fas fa-calendar-week" style="color: var(--cor-destaque-ia);"></i> Aporte Semanal (5 dias √∫teis): <strong>${formatarMoeda(valorSemanalNecessario)}</strong></p>
                     <p><i class="fas fa-sun" style="color: var(--cor-destaque-ia);"></i> Aporte Di√°rio (por dia √∫til): <strong>${formatarMoeda(valorDiarioNecessario)}</strong></p>
                  `;
                  document.getElementById('resultado-plano-ia').innerHTML = html;
             }
            
             return valorDiarioNecessario; 
         };

        const getMetaDiariaAtingida = (transacoes, totalDividasPendentes, fixas, dataAlvo = getHojeString()) => {
            const somaFixas = getSomaFixas(fixas);
            const metaDiariaFixas = getMetaDiariaFixas(somaFixas);
            
            const receitasDiarias = getReceitasPorDia(transacoes);
            
            const metaQuitacaoDiaria = gerarPlanoQuitacaoIA(true, totalDividasPendentes); 
            const metaTotalDiaria = metaDiariaFixas + metaQuitacaoDiaria;
            
            const recebido = receitasDiarias[dataAlvo] || 0;
            const faltando = Math.max(0, metaTotalDiaria - recebido);

            return {
                metaTotal: metaTotalDiaria,
                // Checagem de meta atingida (recebido >= meta, com margem de erro)
                atingido: recebido >= metaTotalDiaria - 0.009, 
                recebido: recebido,
                faltando: faltando
            };
        }
        
        const atualizarDashboard = (transacoes, dividas, fixas) => {
            const { totalReceitas, totalDividasPendentes, progressoCapital, saldoPendenteTotal } = getTotais(transacoes, dividas);
            const somaFixas = getSomaFixas(fixas);
            
            document.getElementById('data-atual').textContent = new Date().toLocaleDateString('pt-BR');
            document.getElementById('soma-fixas').textContent = formatarMoeda(somaFixas).replace('R$', '').trim(); 

            document.getElementById('total-lancado').textContent = formatarMoeda(totalReceitas); 
            document.getElementById('saldo-pendente-total').textContent = formatarMoeda(saldoPendenteTotal);
            document.getElementById('total-dividas-pendentes').textContent = formatarMoeda(totalDividasPendentes);
            
            const progressoExibido = Math.min(100, progressoCapital).toFixed(2);
            document.getElementById('progresso-capital-txt').textContent = `${progressoExibido}%`;
            
            // CORRE√á√ÉO BARRA DE PROGRESSO: Define a largura do elemento
            document.getElementById('progresso-bar').style.width = `${progressoExibido}%`; 
            
            verificarEstadoContasFixas(fixas);
        };
        
        // ===========================================
        // FUN√á√ïES DE RENDERIZA√á√ÉO
        // ===========================================
        
        // ... (renderizarContasFixas mantida) ...

        // ... (renderizarD√≠vidas mantida) ...

        const renderizarLogReceitas = (transacoes) => {
            const listaEntradasBody = document.getElementById('lista-entradas');
            
            // Filtra e ordena apenas transa√ß√µes de ENTRADA
            const transacoesEntrada = transacoes.filter(t => parseFloat(t.valor) > 0);
            const transacoesOrdenadas = transacoesEntrada.map((t, index) => ({...t, displayIndex: index}))
                                                        .sort((a, b) => new Date(b.data) - new Date(a.data));
            
            listaEntradasBody.innerHTML = '';
            if (transacoesOrdenadas.length === 0) {
                 listaEntradasBody.innerHTML = '<tr><td colspan="3" style="text-align: center; color: var(--cor-texto-secundario);">Nenhuma receita lan√ßada no log.</td></tr>';
            } else {
                transacoesOrdenadas.forEach((t) => {
                    const row = listaEntradasBody.insertRow();
                    row.innerHTML = `
                        <td><span class="sucesso-adicionado">SALDO ADICIONADO</span></td>
                        <td class="valor-caixa">${formatarMoeda(t.valor)}</td>
                        <td style="text-align: center;"><button class="btn-acao-tabela deletar" data-index="${t.displayIndex}"><i class="fas fa-trash"></i></button></td>
                    `;
                });
            }
        }

        const renderizarTabelas = (transacoes, dividas) => {
             renderizarLogReceitas(transacoes);
             renderizarD√≠vidas(dividas);
        }

        const renderizarMetaDiaria = (transacoes, totalDividasPendentes, fixas) => {
             const { metaTotal, atingido, recebido, faltando } = getMetaDiariaAtingida(transacoes, totalDividasPendentes, fixas, getHojeString());
             
             const metaDiariaTotalEl = document.getElementById('meta-diaria-total-el');
             const metaDiariaCard = document.getElementById('meta-diaria-card');
             const metaDiariaIncentivoEl = document.getElementById('meta-diaria-incentivo');
            
             metaDiariaTotalEl.textContent = formatarMoeda(metaTotal);
             
             // NOVO: Aplica a classe de estilo e atualiza o texto centralizado
             if (atingido) {
                 metaDiariaCard.classList.add('meta-batida');
                 // Corrigido para usar a cor de sucesso no valor total
                 metaDiariaTotalEl.style.color = 'var(--cor-sucesso)'; 
                 metaDiariaIncentivoEl.style.display = 'block';
                 
                 metaDiariaIncentivoEl.innerHTML = `
                     <i class="fas fa-medal"></i> **META DI√ÅRIA BATIDA!** <i class="fas fa-medal"></i>
                     <p style="color: var(--cor-fixa); font-size: 0.9em; margin-top: 5px;">Capital Extra Acumulado: ${formatarMoeda(recebido - metaTotal)}</p>
                 `;
                 metaDiariaIncentivoEl.style.color = 'var(--cor-sucesso)';
             } else {
                 metaDiariaCard.classList.remove('meta-batida');
                 // Volta a cor normal/de alerta
                 metaDiariaTotalEl.style.color = 'var(--cor-meta-diaria)';
                 metaDiariaCard.style.border = `1px solid var(--cor-meta-diaria)`; 
                 metaDiariaIncentivoEl.style.display = 'block';
                 
                 metaDiariaIncentivoEl.innerHTML = `
                     <i class="fas fa-exclamation-circle"></i> **FALTAM ${formatarMoeda(faltando)}** PARA BATER A META DI√ÅRIA.
                 `;
                 metaDiariaIncentivoEl.style.color = 'var(--cor-alerta)';
             }
        }
        
        // ... (renderizarDicasQuitacao mantida) ...

        // ... (Restante do JS: Inicializa√ß√£o, Eventos, Login e Modals) ...
        
        const initDashboard = () => {
            const transacoes = carregarTransacoes();
            const dividas = carregarDividas();
            
            const fixas = checkAndResetContasFixas(); 
            
            const { totalDividasPendentes } = getTotais(transacoes, dividas);
            
            atualizarDashboard(transacoes, dividas, fixas);
            // ... (renderiza√ß√µes) ...
            renderizarContasFixas(fixas); 
            renderizarTabelas(transacoes, dividas);
            
            // Recalcula o plano IA com a informa√ß√£o de d√≠vidas pendentes
            gerarPlanoQuitacaoIA(false, totalDividasPendentes); 
            renderizarMetaDiaria(transacoes, totalDividasPendentes, fixas);
            renderizarDicasQuitacao(dividas); 
        };
        
        // ... (Outras fun√ß√µes e event listeners mantidos) ...

        // Inicializa√ß√£o ao carregar
        document.addEventListener('DOMContentLoaded', () => {
             // ... (L√≥gica de login mantida) ...
             const loginBox = document.querySelector('.login-box');
             loginBox.style.border = `2px solid var(--cor-primario)`; 
             loginBox.style.boxShadow = `var(--sombra-card-hover)`;

             if (localStorage.getItem('loggedIn') === 'true') {
                 document.getElementById('login-screen').style.display = 'none';
                 document.getElementById('main-content').style.display = 'block';
                 startSessionTimer(); 
                 initDashboard();
             } else {
                 document.getElementById('login-screen').style.display = 'flex';
             }
        });
        

    </script>
</body>
</html>
